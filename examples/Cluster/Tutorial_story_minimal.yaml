scenario:
  name: "Tutorial story minimal" # in mosaik so called world
  start_time: '2012-06-21 07:45:00' # ISO 8601 start time of the simulation
  #end_time: '2012-01-01 01:00:00' # duration in seconds 
  end_time: '2012-06-23 18:00:00' # duration in seconds 
  time_resolution: 900 # time step in seconds (optional). Defaults to 15 minutes (900 s)

models: 
- name: Load_house
  type: Dummy
  inputs:
    in1: 0.6
  states:
    state1: 0.6
  connect:
    ip: 10.197.217.121
    port: 5124
- name: Load_house_LED
  type: LED_connection
  parameters:
    min_speed: 0  # minimum speed for the LED connection (0-100%)
    max_speed: 1  # maximum speed for the LED connection (0-100%)
    direction: 1  # direction of the LED connection (0=towards the white connector)
  inputs:
    speed: 0  # speed for the LED connection (0-100%)
    mapping: []
  states:
    connections: []
  connect:
    ip: 10.197.217.121
    port: 5123

- name: PV
  type: Dummy
  inputs:
    in1: 0.3
  states:
    state1: 0.3
  connect:
    ip: 10.197.217.123
    port: 5122
- name: PV_LED
  type: LED_connection
  parameters:
    min_speed: 0  # minimum speed for the LED connection (0-100%)
    max_speed: 1.0  # maximum speed for the LED connection (0-100%)
    direction: 1  # direction of the LED connection (0=towards the white connector)
  inputs:
    speed: 0  # speed for the LED connection (0-100%)
    mapping: []
  states:
    connections: []
  connect:
    ip: 10.197.217.123
    port: 5123

  
# - name: Wind1
#   type: Dummy
#   states:
#     state1: 0.1
# - name: Wind_LED
#   type: LED_connection
#   # connect:
#   #   ip: 10.89.147.122
#   #   port: 5124
#   parameters:
#     min_speed: 0  # minimum speed for the LED connection (0-100%)
#     max_speed: 0.2  # maximum speed for the LED connection (0-100%)
#     direction: 1  # direction of the LED connection (0=towards the white connector)
#   inputs:
#     speed: 0  # speed for the LED connection (0-100%)
#   states:
#     connections: []

- name: Battery
  type: Dummy
  inputs:
    in1: 0.6
  states:
    state1: 0.6
  connect:
    ip: 10.197.217.124
    port: 5122
- name: Battery_LED
  type: LED_connection
  connect:
    ip: 10.197.217.124
    port: 5123
  parameters:
    min_speed: 0  # minimum speed for the LED connection (0-100%)
    max_speed: 1.0  # maximum speed for the LED connection (0-100%)
    direction: 0  # direction of the LED connection (0=towards the white connector)
  inputs:
    speed: 0  # speed for the LED connection (0-100%)
    mapping: []
  states:
    connections: []

- name: Load_EWI
  type: Dummy
  inputs:
    in1: 0
  states:
    state1: 0.99
  # connect:
  #   ip: 10.197.217.157
  #   port: 5122
- name: Load_EWI_LED
  type: LED_connection
  parameters:
    min_speed: 0  # minimum speed for the LED connection (0-100%)
    max_speed: 1  # maximum speed for the LED connection (0-100%)
    direction: 1  # direction of the LED connection (0=towards the white connector)
  inputs:
    speed: 0  # speed for the LED connection (0-100%)
    mapping: []
  states:
    connections: []
  # connect:
  #   ip: 10.197.217.157
  #   port: 5123

- name: Grid_Ext
  type: Dummy
  parameters:
    param1: 0.5
  states:
    state1: 0.5
  connect:
    ip: 10.197.217.134
    port: 5122
- name: Grid_Ext_LED
  type: LED_connection
  parameters:
    min_speed: 0  # minimum speed for the LED connection (0-100%)
    max_speed: 1  # maximum speed for the LED connection (0-100%)
    direction: 1  # direction of the LED connection (0=towards the white connector)
  inputs:
    speed: 0  # speed for the LED connection (0-100%)
    mapping: []
  states:
    connections: []
  connect:
    ip: 10.197.217.134
    port: 5123


- name: Controller_story
  type: Controller_StoryMode
  inputs:
    physical_connections: []  # List of physical connections with ID's of the LED strips
  states:
    file_index_Load_EWI: 0  # Index to select which load file to read from in the CSV model
    file_index_Load_house: 0  # Index to select which load file to read from in the CSV model
    file_index_PV: 0  # Index to select which load file to read from in the CSV model
    Load_EWI_LED_mapping: []
    Grid_Ext_LED_mapping: []
    Load_house_LED_mapping: []
    PV_LED_mapping: []
    Battery_LED_mapping: []


connections:

# Load EWI

# Load House
- from: Load_house.state1
  to: Load_house_LED.speed
- from: Load_house_LED.connections
  to: Controller_story.physical_connections

# PV panels
- from: PV.state1
  to: PV_LED.speed
- from: PV_LED.connections
  to: Controller_story.physical_connections

# Wind turbine
# - from: Wind1.state1
#   to: Wind_LED.speed
# - from: Wind_LED.connections
#   to: Controller_story.physical_connections

# Battery
- from: Battery.state1
  to: Battery_LED.speed
- from: Battery_LED.connections
  to: Controller_story.physical_connections

# EWI LED
- from: PV.state1
  to: Load_EWI_LED.speed
- from: Battery.state1
  to: Load_EWI_LED.speed
- from: Load_EWI.state1
  to: Load_EWI_LED.speed
- from: Load_EWI_LED.connections
  to: Controller_story.physical_connections

# Grid Ext LED
# - from: Wind1.state1
#   to: Grid_Ext_LED.speed
- from: Load_house.state1
  to: Grid_Ext_LED.speed
- from: Load_EWI.state1
  to: Grid_Ext_LED.speed
- from: Grid_Ext_LED.connections
  to: Controller_story.physical_connections

# Controller Story
- from: Controller_story.Load_EWI_LED_mapping
  to: Load_EWI_LED.mapping
  time_shifted: True
- from: Controller_story.Grid_Ext_LED_mapping
  to: Grid_Ext_LED.mapping
  time_shifted: True
- from: Controller_story.Load_house_LED_mapping
  to: Load_house_LED.mapping
  time_shifted: True
- from: Controller_story.PV_LED_mapping
  to: PV_LED.mapping
  time_shifted: True
- from: Controller_story.Battery_LED_mapping
  to: Battery_LED.mapping
  time_shifted: True

# file indeces
- from: Controller_story.file_index_Load_EWI
  to: Load_EWI.in1
  time_shifted: True
- from: Controller_story.file_index_Load_house
  to: Load_house.in1
  time_shifted: True
- from: Controller_story.file_index_PV
  to: PV.in1
  time_shifted: True
- from: Controller_story.file_index_Battery
  to: Battery.in1
  time_shifted: True

monitor:
  file: './out_Tutorial_cluster_story.csv'
  items:
  # - Grid_Ext_LED.connections
  - Load_house.state1
    #- Controller1.flow2bState
scenario:
  name: "random_scenario" 
  start_time: '2007-07-02 00:00:00' 
  end_time: '2007-07-02 23:45:00' 
  time_resolution: 900 

models: 
- name: CSV_EV_presence
  type: CSV
  parameters:
    file_path: ['./data/data1.csv', './data/data2.csv'] 
    delimiter: ','
    date_format: 'YYYY-MM-DD HH:mm:ss'

- name: CSVload
  type: CSV
  parameters:
    file_path: ['data3.csv', 'data4.csv']
    delimiter: ','
    date_format: 'YYYY-MM-DD HH:mm:ss'

## -- House 1 --
- name: PV1
  type: PV 
  parameters:
    m_area: 60 
    NOCT: 44  
    m_efficiency_stc: [0.198, 0.350, 2.73, 11.46]
    G_NOCT: 800 
    P_STC: 250
    peak_power: 600 
    m_tilt: 14 
    m_az: 180
    cap: [500, 750, 1080]
    output_type: 'power'
  inputs: 
    G_Gh: null 
  outputs:
    pv_gen:


## -- Battery --
- name: Battery1
  type: Battery
  parameters:
    max_p: 500  # maximum charging power limit (kW)
    min_p: -500  # maximum discharging power limit (kW)
    max_energy: [1000, 2000, 3000]  # maximum energy storage capacity of the battery (kWh)
    charge_efficiency: 90  # efficiency of charging the battery (%)
    discharge_efficiency: 90  # efficiency of discharging the battery (%)
    soc_min: 10  # minimum allowable state of charge for the battery (%)
    soc_max: [90, 80, 70]  # maximum allowable state of charge for the battery (%)
  inputs:
    flow2b: 0  # power flow to/from the battery. Positive for charging, negative for discharging (kW)
  outputs:
    p_out: 0  # output power from the battery after discharge/charge decision (Kw)
    p_in: 0  # input power to the battery (kW)
  states:
    mod: [0, 1, -1] # operation mode: 0=no action, 1=charge, -1=discharge
    soc: [50, 60, 70]  # state of charge of the battery (%)
    flag: 0  # flag indicating battery status: 1=fully charged, -1=fully discharged, 0=available for control


connections:

- from: CSVload.load1
  to: Load1.load
- from: Load1.load_dem
  to: Controller1.load_dem

- from: Controller1.flow2b
  to: Battery1.flow2b
  time_shifted: True

monitor:
  file: './out_tutorial4_parallel.csv'
  items:
    - PV1.pv_gen
    - Load1.load_dem
    - CSV_EV_presence.ev1
    - EV1.demand
    - Battery1.soc
    - Battery1.p_out
    - Controller1.flow2b
    - Controller1.res_load
    - Controller1.dump